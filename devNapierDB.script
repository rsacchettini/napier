CREATE SCHEMA PUBLIC AUTHORIZATION DBA
CREATE MEMORY TABLE APPOINTMENT(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,VERSION BIGINT NOT NULL,BUYER_ID BIGINT,DATE_AND_TIME TIMESTAMP NOT NULL,IS_MANAGED_BY_ID BIGINT,PROPERTY_ID BIGINT)
CREATE MEMORY TABLE AUTH_USER(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,VERSION BIGINT NOT NULL,DESCRIPTION VARCHAR(255) NOT NULL,EMAIL VARCHAR(255) NOT NULL,EMAIL_SHOW BOOLEAN NOT NULL,ENABLED BOOLEAN NOT NULL,FORENAME VARCHAR(255) NOT NULL,PASSWD VARCHAR(255) NOT NULL,SURNAME VARCHAR(255) NOT NULL,TELEPHONE_NO VARCHAR(255) NOT NULL,USER_REAL_NAME VARCHAR(255) NOT NULL,USERNAME VARCHAR(255) NOT NULL,CLASS VARCHAR(255) NOT NULL,ADDRESS VARCHAR(255),CITY VARCHAR(255),POST_CODE VARCHAR(255),CONSTRAINT SYS_CT_48 UNIQUE(USERNAME))
CREATE MEMORY TABLE BUYER_PROPERTY(BUYER_LISTED_PROPERTIES_ID BIGINT,PROPERTY_ID BIGINT,CONSTRAINT FK6CE246E19939CD44 FOREIGN KEY(BUYER_LISTED_PROPERTIES_ID) REFERENCES AUTH_USER(ID))
CREATE MEMORY TABLE INTERESTED(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,VERSION BIGINT NOT NULL,MY_BUYER_ID BIGINT NOT NULL,MY_PROP_ID BIGINT NOT NULL,CONSTRAINT FKA0B29149AB0005ED FOREIGN KEY(MY_BUYER_ID) REFERENCES AUTH_USER(ID))
CREATE MEMORY TABLE PROPERTY(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,VERSION BIGINT NOT NULL,ADDRESS VARCHAR(255) NOT NULL,AVAILABLE_FROM VARBINARY(255) NOT NULL,BEDROOM_NUMBER INTEGER NOT NULL,CATEGORY VARCHAR(15) NOT NULL,CITY VARCHAR(255) NOT NULL,DESCRIPTION VARCHAR(255) NOT NULL,IS_MANAGED_BY_ID BIGINT,IS_SOLD_BY_ID BIGINT,MIN_PRICE INTEGER NOT NULL,PICTURE VARBINARY(255),PICTURE_TYPE VARBINARY(255),POST_CODE VARCHAR(255) NOT NULL,VALIDATED BOOLEAN,CONSTRAINT FKC4CDDDD5481F60AC FOREIGN KEY(IS_SOLD_BY_ID) REFERENCES AUTH_USER(ID),CONSTRAINT FKC4CDDDD5BD53EE07 FOREIGN KEY(IS_MANAGED_BY_ID) REFERENCES AUTH_USER(ID))
CREATE MEMORY TABLE REQUESTMAP(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,VERSION BIGINT NOT NULL,CONFIG_ATTRIBUTE VARCHAR(255) NOT NULL,URL VARCHAR(255) NOT NULL,CONSTRAINT SYS_CT_57 UNIQUE(URL))
CREATE MEMORY TABLE ROLES(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,VERSION BIGINT NOT NULL,AUTHORITY VARCHAR(255) NOT NULL,DESCRIPTION VARCHAR(255) NOT NULL)
CREATE MEMORY TABLE ROLES_AUTH_USER(PEOPLE_ID BIGINT NOT NULL,AUTHORITIES_ID BIGINT NOT NULL,PRIMARY KEY(PEOPLE_ID,AUTHORITIES_ID),CONSTRAINT FK7C4E110093929F68 FOREIGN KEY(PEOPLE_ID) REFERENCES ROLES(ID),CONSTRAINT FK7C4E1100287E0CAC FOREIGN KEY(AUTHORITIES_ID) REFERENCES AUTH_USER(ID))
CREATE MEMORY TABLE USER(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,VERSION BIGINT NOT NULL,EMAIL VARCHAR(255) NOT NULL,FORENAME VARCHAR(255) NOT NULL,PASSWORD VARCHAR(255) NOT NULL,SURNAME VARCHAR(255) NOT NULL,TELEPHONE_NO VARCHAR(255) NOT NULL,USERNAME VARCHAR(255) NOT NULL,CONSTRAINT SYS_CT_65 UNIQUE(USERNAME))
ALTER TABLE APPOINTMENT ADD CONSTRAINT FKA8155B9F199389BA FOREIGN KEY(PROPERTY_ID) REFERENCES PROPERTY(ID)
ALTER TABLE APPOINTMENT ADD CONSTRAINT FKA8155B9FC98440BA FOREIGN KEY(BUYER_ID) REFERENCES AUTH_USER(ID)
ALTER TABLE APPOINTMENT ADD CONSTRAINT FKA8155B9FBD53EE07 FOREIGN KEY(IS_MANAGED_BY_ID) REFERENCES AUTH_USER(ID)
ALTER TABLE BUYER_PROPERTY ADD CONSTRAINT FK6CE246E1199389BA FOREIGN KEY(PROPERTY_ID) REFERENCES PROPERTY(ID)
ALTER TABLE INTERESTED ADD CONSTRAINT FKA0B291495A6879D9 FOREIGN KEY(MY_PROP_ID) REFERENCES PROPERTY(ID)
ALTER TABLE APPOINTMENT ALTER COLUMN ID RESTART WITH 1
ALTER TABLE AUTH_USER ALTER COLUMN ID RESTART WITH 5
ALTER TABLE INTERESTED ALTER COLUMN ID RESTART WITH 1
ALTER TABLE PROPERTY ALTER COLUMN ID RESTART WITH 4
ALTER TABLE REQUESTMAP ALTER COLUMN ID RESTART WITH 1
ALTER TABLE ROLES ALTER COLUMN ID RESTART WITH 4
ALTER TABLE USER ALTER COLUMN ID RESTART WITH 1
CREATE USER SA PASSWORD ""
GRANT DBA TO SA
SET WRITE_DELAY 20
SET SCHEMA PUBLIC
INSERT INTO AUTH_USER VALUES(1,1,'','buyer@gmail.com',TRUE,TRUE,'buyer','794aad24cbd58461011ed9094b7fa212','buyer','2345678','buyer buyer','buyer','Buyer',NULL,NULL,NULL)
INSERT INTO AUTH_USER VALUES(2,1,'','seller@gmail.com',TRUE,TRUE,'seller','64c9ac2bb5fe46c3ac32844bb97be6bc','seller','234567','seller seller','seller','Seller','seller','Edinburgh','EH11 3RQ')
INSERT INTO AUTH_USER VALUES(3,1,'','estateagent@gmail.com',TRUE,TRUE,'estateagent','a6634b851f94efbb5647e967a15eea6e','estateagent','234567','estateagent estateagent','estateagent','EstateAgent',NULL,NULL,NULL)
INSERT INTO ROLES VALUES(1,2,'ROLE_SELLER','')
INSERT INTO ROLES VALUES(2,1,'ROLE_BUYER','')
INSERT INTO ROLES VALUES(3,1,'ROLE_ESTATEAGENT','')
INSERT INTO ROLES_AUTH_USER VALUES(1,2)
INSERT INTO ROLES_AUTH_USER VALUES(1,4)
INSERT INTO ROLES_AUTH_USER VALUES(2,1)
INSERT INTO ROLES_AUTH_USER VALUES(3,3)
