CREATE SCHEMA PUBLIC AUTHORIZATION DBA
CREATE MEMORY TABLE APPOINTMENT(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,VERSION BIGINT NOT NULL,BUYER_ID BIGINT,DATE_AND_TIME TIMESTAMP NOT NULL,IS_MANAGED_BY_ID BIGINT,PROPERTY_ID BIGINT)
CREATE MEMORY TABLE AUTH_USER(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,VERSION BIGINT NOT NULL,DESCRIPTION VARCHAR(255) NOT NULL,EMAIL VARCHAR(255) NOT NULL,EMAIL_SHOW BOOLEAN NOT NULL,ENABLED BOOLEAN NOT NULL,FORENAME VARCHAR(255) NOT NULL,PASSWD VARCHAR(255) NOT NULL,SURNAME VARCHAR(255) NOT NULL,TELEPHONE_NO VARCHAR(255) NOT NULL,USER_REAL_NAME VARCHAR(255) NOT NULL,USERNAME VARCHAR(255) NOT NULL,CLASS VARCHAR(255) NOT NULL,ADDRESS VARCHAR(255),CITY VARCHAR(255),POST_CODE VARCHAR(255),CONSTRAINT SYS_CT_48 UNIQUE(USERNAME))
CREATE MEMORY TABLE PROPERTY(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,VERSION BIGINT NOT NULL,ADDRESS VARCHAR(255) NOT NULL,AVAILABLE_FROM VARBINARY(255) NOT NULL,BEDROOM_NUMBER INTEGER NOT NULL,CITY VARCHAR(255) NOT NULL,DESCRIPTION VARCHAR(255) NOT NULL,IS_MANAGED_BY_ID BIGINT,IS_SOLD_BY_ID BIGINT,MIN_PRICE INTEGER NOT NULL,PICTURE VARBINARY(255),PICTURE_TYPE VARBINARY(255),POST_CODE VARCHAR(255) NOT NULL,VALIDATED BOOLEAN NOT NULL,CONSTRAINT FKC4CDDDD5481F60AC FOREIGN KEY(IS_SOLD_BY_ID) REFERENCES AUTH_USER(ID),CONSTRAINT FKC4CDDDD5BD53EE07 FOREIGN KEY(IS_MANAGED_BY_ID) REFERENCES AUTH_USER(ID))
CREATE MEMORY TABLE PROPERTY_BUYER(INTERESTED_BUYERS_ID BIGINT NOT NULL,AVAILABLE_PROPERTIES_ID BIGINT,ID BIGINT,VERSION BIGINT,BUYER_ID BIGINT,PROPERTY_ID BIGINT,CONSTRAINT FKA37BCEC948552F19 FOREIGN KEY(INTERESTED_BUYERS_ID) REFERENCES PROPERTY(ID),CONSTRAINT FKA37BCEC920794E44 FOREIGN KEY(AVAILABLE_PROPERTIES_ID) REFERENCES AUTH_USER(ID),CONSTRAINT FKA37BCEC9199389BA FOREIGN KEY(PROPERTY_ID) REFERENCES PROPERTY(ID),CONSTRAINT FKA37BCEC9C98440BA FOREIGN KEY(BUYER_ID) REFERENCES AUTH_USER(ID))
CREATE MEMORY TABLE REQUESTMAP(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,VERSION BIGINT NOT NULL,CONFIG_ATTRIBUTE VARCHAR(255) NOT NULL,URL VARCHAR(255) NOT NULL,CONSTRAINT SYS_CT_55 UNIQUE(URL))
CREATE MEMORY TABLE ROLES(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,VERSION BIGINT NOT NULL,AUTHORITY VARCHAR(255) NOT NULL,DESCRIPTION VARCHAR(255) NOT NULL)
CREATE MEMORY TABLE ROLES_AUTH_USER(PEOPLE_ID BIGINT NOT NULL,AUTHORITIES_ID BIGINT NOT NULL,PRIMARY KEY(PEOPLE_ID,AUTHORITIES_ID),CONSTRAINT FK7C4E110093929F68 FOREIGN KEY(PEOPLE_ID) REFERENCES ROLES(ID),CONSTRAINT FK7C4E1100287E0CAC FOREIGN KEY(AUTHORITIES_ID) REFERENCES AUTH_USER(ID))
CREATE MEMORY TABLE USER(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,VERSION BIGINT NOT NULL,EMAIL VARCHAR(255) NOT NULL,FORENAME VARCHAR(255) NOT NULL,PASSWORD VARCHAR(255) NOT NULL,SURNAME VARCHAR(255) NOT NULL,TELEPHONE_NO VARCHAR(255) NOT NULL,USERNAME VARCHAR(255) NOT NULL,CONSTRAINT SYS_CT_63 UNIQUE(USERNAME))
CREATE MEMORY TABLE BUYER_PROPERTY(BUYER_AVAILABLE_PROPERTIES_ID BIGINT,PROPERTY_ID BIGINT,CONSTRAINT FK6CE246E1199389BA FOREIGN KEY(PROPERTY_ID) REFERENCES PROPERTY(ID),CONSTRAINT FK6CE246E134BC2BB8 FOREIGN KEY(BUYER_AVAILABLE_PROPERTIES_ID) REFERENCES AUTH_USER(ID))
CREATE MEMORY TABLE PROPERTY_PROPERTY_BUYER(PROPERTY_INTERESTED_BUYERS_ID BIGINT,PROPERTY_BUYER_ID BIGINT,CONSTRAINT FKFE625A7381CAD343 FOREIGN KEY(PROPERTY_INTERESTED_BUYERS_ID) REFERENCES PROPERTY(ID))
ALTER TABLE APPOINTMENT ADD CONSTRAINT FKA8155B9F199389BA FOREIGN KEY(PROPERTY_ID) REFERENCES PROPERTY(ID)
ALTER TABLE APPOINTMENT ADD CONSTRAINT FKA8155B9FC98440BA FOREIGN KEY(BUYER_ID) REFERENCES AUTH_USER(ID)
ALTER TABLE APPOINTMENT ADD CONSTRAINT FKA8155B9FBD53EE07 FOREIGN KEY(IS_MANAGED_BY_ID) REFERENCES AUTH_USER(ID)
ALTER TABLE APPOINTMENT ALTER COLUMN ID RESTART WITH 1
ALTER TABLE AUTH_USER ALTER COLUMN ID RESTART WITH 8
ALTER TABLE PROPERTY ALTER COLUMN ID RESTART WITH 3
ALTER TABLE REQUESTMAP ALTER COLUMN ID RESTART WITH 1
ALTER TABLE ROLES ALTER COLUMN ID RESTART WITH 4
ALTER TABLE USER ALTER COLUMN ID RESTART WITH 1
CREATE USER SA PASSWORD ""
GRANT DBA TO SA
SET WRITE_DELAY 20
SET SCHEMA PUBLIC
INSERT INTO AUTH_USER VALUES(1,3,'','romatou18@gmail.com',TRUE,TRUE,'romain','5026bc63b5418ffdb54f238db245ec01','romain','2347876543','romain romain','sacchettini','Buyer',NULL,NULL,NULL)
INSERT INTO AUTH_USER VALUES(2,5,'','skhedim@gmail.com',TRUE,TRUE,'sof','b61f32a2ffdff16751219654fc5ae6e7','Sofyane','34578987654','sof Sofyane','Khedim','Seller','18 lothian road','Edinburgh','EH11 2RQ')
INSERT INTO AUTH_USER VALUES(3,1,'','john.savage@napier.ac.uk',TRUE,TRUE,'john','527bd5b5d689e2c32ae974c6229ff785','john','2347876543','john john','john','Seller','john','Edinburgh','EH10 5JD')
INSERT INTO AUTH_USER VALUES(4,1,'estate','estate1@gmail.com',FALSE,TRUE,'estate','59f84bcd5fc987fea00d626ba0c6bb4f','estate','34567654','estate estate','estate','EstateAgent',NULL,NULL,NULL)
INSERT INTO AUTH_USER VALUES(5,1,'','johny.cash@gmail.com',TRUE,TRUE,'Johny','05da9d587437a3f58cf91a8694448793','Cash','3467876543','Johny Cash','johny','Seller','12 Hollywood boulevard','Edinburgh','EH10 4HR')
INSERT INTO AUTH_USER VALUES(6,1,'','annie@gmail.com',TRUE,TRUE,'Annie','a21810a01d3fe0df4291d7d3e7abbd1c','cheung','234567654"','Annie cheung','annie','Buyer',NULL,NULL,NULL)
INSERT INTO AUTH_USER VALUES(7,3,'','nicky@tcvbn.com',TRUE,TRUE,'Nicky','72db64f6f4298af089b237efab0ed158','Ward','4347876543','Nicky Ward','nicky','Seller','nicky','Edinburgh','EH10 5JD')
INSERT INTO PROPERTY VALUES(1,1,'12 West Tollcross','aced0005757200115b4c6a6176612e7574696c2e446174653b431724a0300318e00200007870000000047372000e6a6176612e7574696c2e44617465686a81014b59741903000078707708000001195e9da580787371007e00027708000001195e9da580787371007e000277080000011997439980787371007e00027708000001199c69f58078',5,'Edinburgh','<p>nice property</p>',4,2,3,'aced0005757200135b4c6a6176612e6c616e672e537472696e673badd256e7e91d7b4702000078700000000574000b312f696d675f312e6a706774000b312f696d675f322e6a706774000b312f696d675f332e67696674000b312f696d675f342e6a706774000b312f696d675f352e6a7067','aced0005757200135b4c6a6176612e6c616e672e537472696e673badd256e7e91d7b4702000078700000000574000a696d6167652f6a70656774000a696d6167652f6a706567740009696d6167652f67696674000a696d6167652f6a70656774000a696d6167652f6a706567','EH11 2RQ',FALSE)
INSERT INTO PROPERTY VALUES(2,1,'ZETYTRE','aced0005757200115b4c6a6176612e7574696c2e446174653b431724a0300318e00200007870000000027372000e6a6176612e7574696c2e44617465686a81014b59741903000078707708000001195e9da580787371007e00027708000001195e9da58078',3,'Edinburgh','<p>rezrt</p>',4,2,3,'aced0005757200135b4c6a6176612e6c616e672e537472696e673badd256e7e91d7b4702000078700000000174000b322f696d675f312e676966','aced0005757200135b4c6a6176612e6c616e672e537472696e673badd256e7e91d7b47020000787000000001740009696d6167652f676966','EH10 5JD',FALSE)
INSERT INTO ROLES VALUES(1,2,'ROLE_BUYER','buyer')
INSERT INTO ROLES VALUES(2,5,'ROLE_SELLER','seller')
INSERT INTO ROLES VALUES(3,1,'ROLE_ESTATEAGENT','Estate agent')
INSERT INTO ROLES_AUTH_USER VALUES(1,1)
INSERT INTO ROLES_AUTH_USER VALUES(1,6)
INSERT INTO ROLES_AUTH_USER VALUES(2,3)
INSERT INTO ROLES_AUTH_USER VALUES(2,5)
INSERT INTO ROLES_AUTH_USER VALUES(2,7)
INSERT INTO ROLES_AUTH_USER VALUES(3,4)
